<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Evo C++ Library v0.4: String Parsing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Evo C++ Library v0.4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">String Parsing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This shows different approaches for string parsing.</p>
<dl class="section user"><dt>Check Null or Empty</dt><dd></dd></dl>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="string_8h.html">evo/string.h</a>&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceevo.html">evo</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line">    <a class="code" href="classevo_1_1_string.html">String</a> str;</div><div class="line"></div><div class="line">    <span class="comment">// Null string</span></div><div class="line">    <span class="keywordflow">if</span> (str.<a class="code" href="classevo_1_1_list.html#ab561ac96aa86fdf1cc003d863d3c03e2">null</a>())</div><div class="line">        { }</div><div class="line"></div><div class="line">    <span class="comment">// Empty string is either null or &quot;&quot;</span></div><div class="line">    <span class="keywordflow">if</span> (str.<a class="code" href="classevo_1_1_list.html#ac6e61de369e994009e36f344f99c15ad">empty</a>())</div><div class="line">        { }</div><div class="line"></div><div class="line">    <span class="comment">// Non-empty string</span></div><div class="line">    <span class="keywordflow">if</span> (!str.<a class="code" href="classevo_1_1_list.html#ac6e61de369e994009e36f344f99c15ad">empty</a>())</div><div class="line">        { }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><dl class="section user"><dt>Splitting</dt><dd></dd></dl>
<p>Splitting to substrings: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="string_8h.html">evo/string.h</a>&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceevo.html">evo</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line">    <a class="code" href="classevo_1_1_string.html">String</a> str(<span class="stringliteral">&quot;foo=bar&quot;</span>), left, right;</div><div class="line"></div><div class="line">    <span class="comment">// Split to left/right on first occurrence of &#39;=&#39;</span></div><div class="line">    str.<a class="code" href="classevo_1_1_string.html#a1031324ddc0d652da97731943953e168">split</a>(<span class="charliteral">&#39;=&#39;</span>, left, right);</div><div class="line"></div><div class="line">    <span class="comment">// Split to just left</span></div><div class="line">    str.<a class="code" href="classevo_1_1_string.html#a1031324ddc0d652da97731943953e168">split</a>(<span class="charliteral">&#39;=&#39;</span>, left);</div><div class="line"></div><div class="line">    <span class="comment">// Split to just right</span></div><div class="line">    str.<a class="code" href="classevo_1_1_string.html#a1031324ddc0d652da97731943953e168">split</a>(<span class="charliteral">&#39;=&#39;</span>, <a class="code" href="namespaceevo.html#a87e905b740b8d611459b8f372aba9fbbaa944b069897379b4df4ccdd2b2f8043a">vNULL</a>, right);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>Splitting to a list with generic conversion: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="string_8h.html">evo/string.h</a>&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceevo.html">evo</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line">    <a class="code" href="classevo_1_1_string.html">String</a> str(<span class="stringliteral">&quot;1,2,3&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Split into list</span></div><div class="line">    <a class="code" href="classevo_1_1_list.html">List&lt;Int&gt;</a> nums;</div><div class="line">    str.<a class="code" href="classevo_1_1_string.html#a1031324ddc0d652da97731943953e168">split</a>(nums);</div><div class="line"></div><div class="line">    <span class="comment">// Join back into list</span></div><div class="line">    str.<a class="code" href="classevo_1_1_string.html#afa411ad006ea316679c89feb661fc15a">join</a>(nums.<a class="code" href="classevo_1_1_list.html#aa29660f120f9f226e79c58af018fe426">set</a>());</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>Splitting to a list with generic conversion and alternate tokenizer: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="string_8h.html">evo/string.h</a>&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceevo.html">evo</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line">    <a class="code" href="classevo_1_1_string.html">String</a> str(<span class="stringliteral">&quot;1,&#39;2,2&#39;,3&quot;</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Split into list, with tokenizer supporting quoting</span></div><div class="line">    <a class="code" href="classevo_1_1_list.html">List&lt;String&gt;</a> nums;</div><div class="line">    str.<a class="code" href="classevo_1_1_string.html#a1031324ddc0d652da97731943953e168">split</a>&lt;<a class="code" href="structevo_1_1_str_tok_variant.html">StrTokQ</a>&gt;(nums);</div><div class="line"></div><div class="line">    <span class="comment">// Join back into list, with quoting</span></div><div class="line">    str.<a class="code" href="classevo_1_1_string.html#a2312dc875dce742080cdf26a6b3127e3">joinq</a>(nums.<a class="code" href="classevo_1_1_list.html#aa29660f120f9f226e79c58af018fe426">set</a>());</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><dl class="section user"><dt>Tokenizing</dt><dd></dd></dl>
<p><a class="el" href="structevo_1_1_sub_string.html" title="Reference and access existing string data. ">SubString</a> has methods for extracting tokens: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="substring_8h.html">evo/substring.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">evo/io.h</a>&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceevo.html">evo</a>;</div><div class="line"><span class="keyword">static</span> <a class="code" href="structevo_1_1_console.html">Console</a>&amp; c = <a class="code" href="group___evo_i_o.html#ga9652bb34b10cb7b6b47c3bb17a0aa008">con</a>();</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line">    <a class="code" href="structevo_1_1_sub_string.html">SubString</a> str(<span class="stringliteral">&quot;one,two,three&quot;</span>), value;</div><div class="line">    <span class="keywordflow">while</span> (str.token(value, <span class="charliteral">&#39;,&#39;</span>))</div><div class="line">        c.<a class="code" href="structevo_1_1_console.html#aa3d970bba266de23123819eee184108b">out</a> &lt;&lt; value &lt;&lt; <a class="code" href="namespaceevo.html#aaad808a54ff380fa951955d233d8c3f7">NL</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p><a class="el" href="classevo_1_1_str_tok.html" title="String forward tokenizer. ">StrTok</a> classes can parse into substring tokens: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="substring_8h.html">evo/substring.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">evo/io.h</a>&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceevo.html">evo</a>;</div><div class="line"><span class="keyword">static</span> <a class="code" href="structevo_1_1_console.html">Console</a>&amp; c = <a class="code" href="group___evo_i_o.html#ga9652bb34b10cb7b6b47c3bb17a0aa008">con</a>();</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line">    <span class="comment">// Tokenize in order (left to right)</span></div><div class="line">    <a class="code" href="classevo_1_1_str_tok.html">StrTok</a> tok1(<span class="stringliteral">&quot;one,two,three&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span> (tok1.next(<span class="charliteral">&#39;,&#39;</span>))</div><div class="line">        c.<a class="code" href="structevo_1_1_console.html#aa3d970bba266de23123819eee184108b">out</a> &lt;&lt; tok1.value() &lt;&lt; <a class="code" href="namespaceevo.html#aaad808a54ff380fa951955d233d8c3f7">NL</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Tokenize in reverse (right to left)</span></div><div class="line">    <a class="code" href="classevo_1_1_str_tok_r.html">StrTokR</a> tok2(<span class="stringliteral">&quot;one,two,three&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span> (tok2.next(<span class="charliteral">&#39;,&#39;</span>))</div><div class="line">        c.<a class="code" href="structevo_1_1_console.html#aa3d970bba266de23123819eee184108b">out</a> &lt;&lt; tok2.value() &lt;&lt; <a class="code" href="namespaceevo.html#aaad808a54ff380fa951955d233d8c3f7">NL</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Tokenize with quoting -- using StrTokQ</span></div><div class="line">    <a class="code" href="structevo_1_1_str_tok_variant.html">StrTokQ</a> tok3(<span class="stringliteral">&quot;one,&#39;two,two&#39;,three&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span> (tok3.next(<span class="charliteral">&#39;,&#39;</span>))</div><div class="line">        c.<a class="code" href="structevo_1_1_console.html#aa3d970bba266de23123819eee184108b">out</a> &lt;&lt; tok3.value() &lt;&lt; <a class="code" href="namespaceevo.html#aaad808a54ff380fa951955d233d8c3f7">NL</a>;</div><div class="line"></div><div class="line">    <span class="comment">// Tokenize with quoting -- using nextq()</span></div><div class="line">    <a class="code" href="classevo_1_1_str_tok.html">StrTok</a> tok4(<span class="stringliteral">&quot;one,&#39;two,two&#39;,three&quot;</span>);</div><div class="line">    <span class="keywordflow">while</span> (tok4.nextq(<span class="charliteral">&#39;,&#39;</span>))</div><div class="line">        c.<a class="code" href="structevo_1_1_console.html#aa3d970bba266de23123819eee184108b">out</a> &lt;&lt; tok4.value() &lt;&lt; <a class="code" href="namespaceevo.html#aaad808a54ff380fa951955d233d8c3f7">NL</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><dl class="section user"><dt>Quoting</dt><dd></dd></dl>
<p>For delimited text Evo uses quoting unstead if escaping, which avoids having to mutate tokens by adding or filtering escape characters (like backslash). Where quoted tokenizing is supported, multiple quoting types are supported to handle any text.</p>
<p>No quoting:</p><ul>
<li>If a token doesn't begin <em>and</em> end with quotes then it's considered unquoted</li>
<li>The parser doesn't get confused when quotes appear in unquoted tokens</li>
<li>Example comma-delimited strings that aren't considered quoted at all &ndash; these don't confuse the parser:<ul>
<li>can't,won't,'bout<ul>
<li>can't</li>
<li>won't</li>
<li>'bout</li>
</ul>
</li>
<li>'not' quoted,also not 'quoted'<ul>
<li>'not' quoted</li>
<li>also not 'quoted'</li>
</ul>
</li>
</ul>
</li>
<li>Example that will confuse the parser using words that begin <em>and</em> end with an apostrophe:<ul>
<li>can't,'bout,runnin',jumpin'<ul>
<li>can't</li>
<li>bout,runnin &ndash; <em>considered quoted, fix with actual quoting</em></li>
<li>jumpin' &ndash; <em>dangerous but ok here</em></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Single-char quoting:</p><ul>
<li>Single-quotes: 'foo bar'</li>
<li>Double-quotes: "foo bar"</li>
<li>Backtick-quotes: `foo bar`</li>
</ul>
<p>Triple quoting:</p><ul>
<li>Triple single-quotes: '''foo bar'''</li>
<li>Triple double-quotes: """foo bar"""</li>
<li>Triple backtick-quotes: ```foo bar```</li>
</ul>
<p>Backtick-DEL quoting:</p><ul>
<li>This is single-backtick quoting with a DEL char (code 7F, normally not printable but shown here as ␡) added after each backtick<ul>
<li>Example: `␡foo bar`␡</li>
</ul>
</li>
<li>The DEL char is not normally used at all with text, and can still be used as a delimiter (and won't be confused with backtick-DEL)<ul>
<li>Example with DEL delimiter and backtick-DEL quoting:<ul>
<li>`␡foo bar`␡␡`␡stuff things`␡<ul>
<li>foo bar</li>
<li>stuff things</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Only needed when no other quoting is possible, which is very rare </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 3 2018 22:23:08 for Evo C++ Library v0.4 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
